---
author: xljroy
comments: true
date: 2014-01-31 15:15:15+00:00
layout: post
slug: '%e7%ae%80%e6%98%93%e7%99%be%e5%ba%a6%e8%b4%b4%e5%90%a7%e6%bc%ab%e7%94%bb%e4%b8%8b%e8%bd%bd%e5%99%a8'
title: 简易百度贴吧漫画下载器#Python
wordpress_id: 157
categories:
- Python
---

之前一段时间做过的懒人应用之一...用来下载贴吧的漫画

不知道该怎么命名版本了,alpha不合适beta不合适,其他的就更不好意思了

简单的入门级爬虫

    
    import urllib
    import re
    
    def openUrl(url):
        html=urllib.urlopen(url).read()
    return html
    
    def downloadImg(html,i):
        pat=r'class="BDE_Image" src="(.*?\.jpg)"'
        imgPat=re.compile(pat)
        imgUrl=re.findall(imgPat,html)
        num=0
        for url in imgUrl:
            urllib.urlretrieve(url,'%s_%s.jpg' % (i,num))
            num+=1
    
    urll=raw_input("Input Url to Download Comics:")
    n=int(raw_input("Input Page Number:"))
    for i in range(0,n):
        addr='%s?pn=%s' % (urll,i)
        #replace addr with the page that u want download
        page=openUrl(addr)
        downloadImg(page,i)
    
    print "Comics Downloaded"


主要用了Python爬虫的两个基础包

re - 用来解析页面,提取所要下载图片的链接

urllib - 用来打开网页和下载图片

这里为了避免执行多余的步骤,所以没有提取下一页链接,而是通过页面url执行有选择的翻页.通过查看我们可以知道帖子可以通过在url地址后面附加"?pn=n"来执行跳转到第几页.

使用程序请安装Python 2.7.x环境,输入你想要下载的帖子和下载图片的范围(帖子的页数).然后等着"Comics Downloaded"出发就是成功下载.

欢迎大家用这个来代替不停的右键另存为,也欢迎大家自己修改处更方便的版本!



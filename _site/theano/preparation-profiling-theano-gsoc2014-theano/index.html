<!DOCTYPE html>
<html>

    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Roy,Lijun,Xue,Roy Xue,Lijun Xue,薛立君">
    <meta name="author" content="">
    <link rel="shortcut icon" href="/assets/ico/favicon.ico">

    <title>Roy Xue is Here :) - Preparation-Profiling Theano #GSoC2014-Theano</title>

    <!-- Bootstrap core CSS -->
    <link href="/assets/css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/assets/css/style.css" rel="stylesheet">
    <link href="/assets/css/font-awesome.min.css" rel="stylesheet">


    <script src="/assets/js/jquery-2.1.4.min.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>
    <script src="/assets/js/retina-1.1.0.js"></script>
    <script src="/assets/js/jquery.hoverdir.js"></script>
    <script src="/assets/js/jquery.hoverex.min.js"></script>
    <script src="/assets/js/jquery.prettyPhoto.js"></script>
    <script src="/assets/js/jquery.isotope.min.js"></script>
    <script src="/assets/js/custom.js"></script>
    <script src="/assets/js/jquery.typer.js"></script>
    <script src="/assets/js/instafeed.js"></script>

    <script src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/trianglify/0.3.1/trianglify.min.js"></script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/topojson/1.6.9/topojson.min.js"></script>
    <script src="/assets/js/datamaps.world.min.js"></script>
    <!-- Custom CSS -->
    <!--<link rel="stylesheet" href="/css/main.css">-->


    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- <script src="/assets/js/modernizr.js"></script> -->
</head>


    <body>
        <!-- Fixed navbar -->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Roy Xue is Here :)</a>
    </div>
    <div class="navbar-collapse collapse navbar-right">
      <ul class="nav navbar-nav">
        <li ><a href="/">Home</a></li>
        <li ><a href="/blog/">Blog</a></li>
        <li ><a href="/portfolio/">Project</a></li>
        <li ><a href="/gallery/">Gallery</a></li>
        <!-- <li ><a href="/about/">ABOUT</a></li> -->
        <!-- <li ><a href="/contact/">CONTACT</a></li> -->
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>


            <div id="blue">
    <div class="container">
        <div class="row">
            <h3>Preparation-Profiling Theano #GSoC2014-Theano</h3>
        </div><!-- /row -->
    </div> <!-- /container -->
</div><!-- /blue -->

<div class="container mtb">
    <div class="row">
        <!-- SINGLE POST -->
        <div class="col-lg-8">
            <!-- Blog Post  -->
            <!-- <p><img class="img-responsive" src="/assets/img/blog/"></p> -->
            <a href="/theano/preparation-profiling-theano-gsoc2014-theano"><h3 class="ctitle">Preparation-Profiling Theano #GSoC2014-Theano</h3></a>
            <p><csmall>May 2, 2014. | By: xljroy</csmall></p>

            <h2 id="preparation-profiling-theano-gsoc2014-theano">Preparation-Profiling Theano #GSoC2014-Theano</h2>

<p>Sorry first for missing theano-dev replies cause I thought it would auto-send me an email. Now my task is reading and learning about profile in<a href="http://deeplearning.net/software/theano/tutorial/profiling.html">http://deeplearning.net/software/theano/tutorial/profiling.html</a>.</p>

<p>When I first saw “profile”, the first question occurs in my mind is how to translate it into a Chinese, I found that maybe 侧写(ce xie), is proper, which means to describe something in details.</p>

<p>Profile the code plays an important part in coding, which helps us to know more about our programs execution. Now we use profile in theano instead of ProfileMode. And use profile in theano is really easy.</p>

<p>The simplest way to use profile is by define PROFILE_FLAGS. we can add parameters like profile = true. I have tried different output with these parameters like profile, profile_memory, profile_optimizer, and optimizer_excluding. Fred told me that profile_optimizer is not in my task range so I just look a little about that. Optimizer_excluding will affect the execution ,but will it affect memory usage? I will check it out.</p>

<p>When we define a function with parameter “profile = true”, then we view the f.profile is a ProfileStats instance, if we wanna check it content use f.profile.summary()</p>

<p>After discussing with Fred, we make sure that modify the output of profile_memory is needed to be done.</p>

<p>So my aim is to know the output info and see where should be modified. The profile_memory will be important, as I can use it to monitor memory usage when doing lower memory usage.</p>

<p>The output of profile</p>

<pre><code>➜  DeepLearningModel git:(master) ✗ THEANO_FLAGS=profile=true,profile_memory=true  python profile.py
/Library/Python/2.7/site-packages/theano/gof/vm.py:675: UserWarning: CVM does not support memory profile, using Stack VM.
  'CVM does not support memory profile, using Stack VM.')
5.0
Function profiling
==================
  Message: Add
  Time in 1 calls to Function.__call__: 2.119541e-04s
  Time in Function.fn.__call__: 6.079674e-05s (28.684%)
  Time in thunks: 9.059906e-06s (4.274%)
  Total compile time: 1.518121e-01s
    Theano Optimizer time: 4.169512e-02s
       Theano validate time: 0.000000e+00s
    Theano Linker time (includes C, CUDA code generation/compiling): 4.143310e-02s

Class
---
&lt;% time&gt; &lt;sum %&gt; &lt;apply time&gt; &lt;time per call&gt; &lt;type&gt; &lt;#call&gt; &lt;#apply&gt; &lt;Class name&gt;
  100.0%   100.0%       0.000s       9.06e-06s     C        1        1   &lt;class 'theano.tensor.elemwise.Elemwise'&gt;
   ... (remaining 0 Classes account for   0.00%(0.00s) of the runtime)

Ops
---
&lt;% time&gt; &lt;sum %&gt; &lt;apply time&gt; &lt;time per call&gt; &lt;type&gt; &lt;#call&gt; &lt;#apply&gt; &lt;Op name&gt;
  100.0%   100.0%       0.000s       9.06e-06s     C        1        1   Elemwise{add,no_inplace}
   ... (remaining 0 Ops account for   0.00%(0.00s) of the runtime)

Apply
------
&lt;% time&gt; &lt;sum %&gt; &lt;apply time&gt; &lt;time per call&gt; &lt;#call&gt; &lt;id&gt; &lt;Mflops&gt; &lt;Gflops/s&gt; &lt;Apply name&gt;
  100.0%   100.0%       0.000s       9.06e-06s      1     0                     Elemwise{add,no_inplace}(x, y)
    input 0: dtype=float64, shape=(), strides=c
    input 1: dtype=float64, shape=(), strides=c
    output 0: dtype=float64, shape=(), strides=c
   ... (remaining 0 Apply instances account for 0.00%(0.00s) of the runtime)

Memory Profile
(Sparse variables are ignored)
---
    Max if linker=cvm (default): unknown
    Max if no gc (allow_gc=False): 0KB
    Max if linker=c|py: 0KB
    Memory saved if gc is enabled (linker=c|py): 0KB

    &lt;Sum apply outputs (bytes)&gt; &lt;Apply outputs shape&gt; &lt;created/inplace/view&gt; &lt;Apply node&gt;

   ... (remaining 1 Apply account for    8B/8B ((100.00%)) of the Apply with dense outputs sizes)

    All Apply nodes have output sizes that take less than 1024B.
    &lt;created/inplace/view&gt; is taken from the Op's declaration.
    Apply nodes marked 'inplace' or 'view' may actually allocate memory, this is not reported here. If you use DebugMode, warnings will be emitted in those cases.
</code></pre>



            <div class="spacing"></div>
            <!-- <h6>SHARE:</h6>
            <p class="share">
                <a href="#"><i class="fa fa-twitter"></i></a>
                <a href="#"><i class="fa fa-facebook"></i></a>
                <a href="#"><i class="fa fa-tumblr"></i></a>
                <a href="#"><i class="fa fa-google-plus"></i></a>
            </p> -->
        </div><!--/col-lg-8 -->

        <div class="col-lg-4">
   <!--  <h4>Search</h4>
    <div class="hline"></div>
        <p>
            <br/>
            <input type="text" class="form-control" placeholder="Search something">
        </p>
    <div class="spacing"></div> -->
    <h4>Subscribe</h4>
    <div class="hline"></div>
        <p>
            <p class="rss-subscribe">Subscribe to this blog <a href="/feed.xml">via RSS</a>.</p>
        </p>
    <div class="spacing"></div>
    <h4>Categories</h4>
    <div class="hline"></div>
    
        <p>
            <a href="/category/#life"><i class="fa fa-angle-right"></i> Life</a>
            <span class="badge badge-theme pull-right">58</span>
        </p>
    
        <p>
            <a href="/category/#having fun"><i class="fa fa-angle-right"></i> Having fun</a>
            <span class="badge badge-theme pull-right">6</span>
        </p>
    
        <p>
            <a href="/category/#python"><i class="fa fa-angle-right"></i> Python</a>
            <span class="badge badge-theme pull-right">9</span>
        </p>
    
        <p>
            <a href="/category/#hacker"><i class="fa fa-angle-right"></i> Hacker</a>
            <span class="badge badge-theme pull-right">2</span>
        </p>
    
        <p>
            <a href="/category/#dev"><i class="fa fa-angle-right"></i> Dev</a>
            <span class="badge badge-theme pull-right">13</span>
        </p>
    
        <p>
            <a href="/category/#scrapy"><i class="fa fa-angle-right"></i> Scrapy</a>
            <span class="badge badge-theme pull-right">3</span>
        </p>
    
        <p>
            <a href="/category/#theano"><i class="fa fa-angle-right"></i> Theano</a>
            <span class="badge badge-theme pull-right">14</span>
        </p>
    
        <p>
            <a href="/category/#question"><i class="fa fa-angle-right"></i> Question</a>
            <span class="badge badge-theme pull-right">1</span>
        </p>
    
        <p>
            <a href="/category/#machine learning"><i class="fa fa-angle-right"></i> Machine learning</a>
            <span class="badge badge-theme pull-right">5</span>
        </p>
    
        <p>
            <a href="/category/#explorer"><i class="fa fa-angle-right"></i> Explorer</a>
            <span class="badge badge-theme pull-right">3</span>
        </p>
    
        <p>
            <a href="/category/#rails"><i class="fa fa-angle-right"></i> Rails</a>
            <span class="badge badge-theme pull-right">1</span>
        </p>
    
        <p>
            <a href="/category/#design"><i class="fa fa-angle-right"></i> Design</a>
            <span class="badge badge-theme pull-right">1</span>
        </p>
    
        <p>
            <a href="/category/#fun"><i class="fa fa-angle-right"></i> Fun</a>
            <span class="badge badge-theme pull-right">1</span>
        </p>
    

    <div class="spacing"></div>

    <h4>Recent Posts</h4>
    <div class="hline"></div>
        <ul class="popular-posts">
             
                <li>
                    <!-- <a href="/blog/life/never-better-never-worse"><img src="/assets/img/blog/thumbs/" alt="Popular Post"></a> -->
                    <p><a href="/blog/life/never-better-never-worse">Never Better, Never Worse</a></p>
                <em>Posted on 22 Apr 2015</em>
            </li>
             
                <li>
                    <!-- <a href="/blog/life/good-photo"><img src="/assets/img/blog/thumbs/" alt="Popular Post"></a> -->
                    <p><a href="/blog/life/good-photo">好照片</a></p>
                <em>Posted on 18 Apr 2015</em>
            </li>
             
                <li>
                    <!-- <a href="/blog/dev/fun/build-minecraft-server-on-digitalocean"><img src="/assets/img/blog/thumbs/" alt="Popular Post"></a> -->
                    <p><a href="/blog/dev/fun/build-minecraft-server-on-digitalocean">Build Minecraft Server on DigitalOcean</a></p>
                <em>Posted on 14 Apr 2015</em>
            </li>
             
                <li>
                    <!-- <a href="/blog/design/first-time-icon-design"><img src="/assets/img/blog/thumbs/" alt="Popular Post"></a> -->
                    <p><a href="/blog/design/first-time-icon-design">First Time Icon Design</a></p>
                <em>Posted on 12 Apr 2015</em>
            </li>
             
        </ul>

    <div class="spacing"></div>

    <!-- <h4>Popular Tags</h4>
    <div class="hline"></div>
    <p>
    
            <a class="btn btn-theme" href="/category/#life" role="button">Life (58)</a>	         
        
            <a class="btn btn-theme" href="/category/#having fun" role="button">Having fun (6)</a>	         
        
            <a class="btn btn-theme" href="/category/#python" role="button">Python (9)</a>	         
        
            <a class="btn btn-theme" href="/category/#hacker" role="button">Hacker (2)</a>	         
        
            <a class="btn btn-theme" href="/category/#dev" role="button">Dev (13)</a>	         
        
            <a class="btn btn-theme" href="/category/#scrapy" role="button">Scrapy (3)</a>	         
        
            <a class="btn btn-theme" href="/category/#theano" role="button">Theano (14)</a>	         
        
            <a class="btn btn-theme" href="/category/#machine learning" role="button">Machine learning (5)</a>	         
        
            <a class="btn btn-theme" href="/category/#explorer" role="button">Explorer (3)</a>	         
        
            <a class="btn btn-theme" href="/category/#rails" role="button">Rails (1)</a>	         
        
            <a class="btn btn-theme" href="/category/#design" role="button">Design (1)</a>	         
        
            <a class="btn btn-theme" href="/category/#fun" role="button">Fun (1)</a>	         
        
    </p> -->
</div>

    </div><!--/row -->
</div><!--/container -->


        <div id="footerwrap">
    <div class="container">
        <div class="row">
            <div class="col-lg-4">
                <h4>About</h4>
                <div class="hline-w"></div>
                <p>Exploring the world :)</p>
            </div>
            <div class="col-lg-4">
                <h4>Social Links</h4>
                <div class="hline-w"></div>
                <p>
                    
                        <a href="https://www.facebook.com/roy.xue29" class="btn-social btn-outline"><i class="fa fa-facebook"></i></a>
                    
                        <a href="https://twitter.com/xljroy" class="btn-social btn-outline"><i class="fa fa-twitter"></i></a>
                    
                        <a href="http://instagram.com/xljroy" class="btn-social btn-outline"><i class="fa fa-instagram"></i></a>
                    
                        <a href="https://plus.google.com/+RoyXue" class="btn-social btn-outline"><i class="fa fa-google-plus"></i></a>
                    
                        <a href="https://cn.linkedin.com/in/royxue" class="btn-social btn-outline"><i class="fa fa-linkedin"></i></a>
                    
                        <a href="https://github.com/royxue" class="btn-social btn-outline"><i class="fa fa-github"></i></a>
                    
                        <a href="https://500px.com/xljroy" class="btn-social btn-outline"><i class="fa fa-picture-o"></i></a>
                    
                </p>
            </div>
            <div class="col-lg-4">
                <h4>Contacts</h4>
                <div class="hline-w"></div>
                <p>
                    
                        Email=> xljroy#gmail.com <br>
                    
                        Wechat=> xljroy <br>
                    
                        Line=> royxue29 <br>
                    
                </p>
            </div>
        </div><!--/row -->
    </div><!--/container -->
</div><!--/footerwrap -->

        
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58877422-1', 'auto');
  ga('send', 'pageview');

</script>

<script>
// Portfolio
(function($) {
	"use strict";
	var $container = $('.portfolio'),
		$items = $container.find('.portfolio-item'),
		portfolioLayout = 'fitRows';
		if( $container.hasClass('portfolio-centered') ) {
			portfolioLayout = 'masonry';
		}
		$container.isotope({
			filter: '*',
			animationEngine: 'best-available',
			layoutMode: portfolioLayout,
			animationOptions: {
			duration: 750,
			easing: 'linear',
			queue: false
		},
		masonry: {
		}
		}, refreshWaypoints());

		function refreshWaypoints() {
			setTimeout(function() {
			}, 1000);
		}

		$('nav.portfolio-filter ul a').on('click', function() {
				var selector = $(this).attr('data-filter');
				$container.isotope({ filter: selector }, refreshWaypoints());
				$('nav.portfolio-filter ul a').removeClass('active');
				$(this).addClass('active');
				return false;
		});

		function getColumnNumber() {
			var winWidth = $(window).width(),
			columnNumber = 1;

			if (winWidth > 1200) {
				columnNumber = 5;
			} else if (winWidth > 950) {
				columnNumber = 4;
			} else if (winWidth > 600) {
				columnNumber = 3;
			} else if (winWidth > 400) {
				columnNumber = 2;
			} else if (winWidth > 250) {
				columnNumber = 1;
			}
				return columnNumber;
			}

			function setColumns() {
				var winWidth = $(window).width(),
				columnNumber = getColumnNumber(),
				itemWidth = Math.floor(winWidth / columnNumber);
				$container.find('.portfolio-item').each(function() {
					$(this).css( {
					width : itemWidth + 'px'
				});
			});
		}

		function setPortfolio() {
			setColumns();
			$container.isotope('reLayout');
		}

		$container.imagesLoaded(function () {
			setPortfolio();
		});

		$(window).on('resize', function () {
		setPortfolio();
	});
})(jQuery);
</script>
<script>
  $(function () {
    $('[data-typer-targets]').typer();
  });
</script>
    </body>
</html>
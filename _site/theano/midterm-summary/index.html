<!DOCTYPE html>
<html>

    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Roy,Lijun,Xue,Roy Xue,Lijun Xue,薛立君">
    <meta name="author" content="">
    <link rel="shortcut icon" href="/assets/ico/favicon.ico">

    <title>Roy Xue is Here :) - Midterm Summary#GSoC2014-Theano</title>

    <!-- Bootstrap core CSS -->
    <link href="/assets/css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/assets/css/style.css" rel="stylesheet">
    <link href="/assets/css/font-awesome.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <!--<link rel="stylesheet" href="/css/main.css">-->


    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="/assets/js/modernizr.js"></script>
</head>


    <body>
        <!-- Fixed navbar -->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Roy Xue is Here :)</a>
    </div>
    <div class="navbar-collapse collapse navbar-right">
      <ul class="nav navbar-nav">
        <li ><a href="/">Home</a></li>
        <li ><a href="/blog/">Blog</a></li>
        <li ><a href="/portfolio/">Project</a></li>
        <li ><a href="/resume/">Resume</a></li>
        <!-- <li ><a href="/about/">ABOUT</a></li> -->
        <!-- <li ><a href="/contact/">CONTACT</a></li> -->
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>


            <div id="blue">
    <div class="container">
        <div class="row">
            <h3>Midterm Summary#GSoC2014-Theano</h3>
        </div><!-- /row -->
    </div> <!-- /container -->
</div><!-- /blue -->

<div class="container mtb">
    <div class="row">
        <!-- SINGLE POST -->
        <div class="col-lg-8">
            <!-- Blog Post  -->
            <!-- <p><img class="img-responsive" src="/assets/img/blog/"></p> -->
            <a href="/theano/midterm-summary"><h3 class="ctitle">Midterm Summary#GSoC2014-Theano</h3></a>
            <p><csmall>Jun 26, 2014. | By: xljroy</csmall></p>

            <h2 id="midterm-summary">Midterm Summary</h2>

<hr />

<p>Summary of GSoC 2014 Python Software Foundation Theano Community</p>

<p>Few hours ago, I had submitted the midterm evaluation of GSoC 2014 on Melange.</p>

<h4 id="from-start">From Start</h4>

<p>For applying the GSoC, I submitted my first PR to Theano as add cumprod/cumsum to _tensor_variable <a href="https://github.com/Theano/Theano/pull/1769">Add a_tensor_variable.cumprod/cumsum() interface #1769</a> Merged</p>

<p>Then when I received the email from Google for I was chosen to be one of GSoC 2014, it was really a luck day. Then I spend my time in reading some Theano/Numpy document, chatting with my mentors, and bonding with the community.</p>

<p>On May 19th, exactly the day after my birthday (May 18th), I started coding.</p>

<h4 id="till-now">Till Now</h4>

<p>As plans in the proposal, till midterm it would be the Task Step 1 “Lower Memory Usage”. These step is divided into 2 phrase.</p>

<p>For phrase 1, the aim is to extend the Theano memory profiler to print the max memory usage in the current implementation. This is needed for comparison.</p>

<p>My PR for this phrase is <a href="https://github.com/Theano/Theano/pull/1854">Add a list store executed node order #1854</a> Merged</p>

<p>In this part, at first I added node_executed_order and node_cleared_order in class Stack to store the node executed and cleared order which theano uses now. Then I rewrote the memory counting as a new method, so we can just call it twice to calculate memory usage for the previous and current order. Then print the statstics with “current(previous)” format. Then I wrote test file for this part, Fred and I had dicussions about the details of my code, like how to make it better, or how to make it work better. Though I could describe this part of work easily, I can still remember how I was feeling when do this at first, kind of no ideas on how to start, and made some mistakes.</p>

<p>For phrase 2, the aim is to implement a function that find the nodes execution order that minimize the memory usage during compilation. This will also be done in the Theano profiler. So all shapes information are known. This can be done by checking all valid order of execution and keeping the one that have the lower max memory usage.</p>

<p>My PR for this phrase is <a href="https://github.com/Theano/Theano/pull/1934">Compute minimum peak #1934</a> Almost finished</p>

<p>In thies part, I started from writing pseudo code at first, for dicussing with Fred, he said that I could use backtrack algorithm, the first thing occurs in my mind is the magic python generator I used before. The goal of the algorthm is to generate all valid order, so there has to a method to check if node is valid. The way I used here is from vm.py, which use the node.inputs and compute_map to check whether the node has its inputs variables.Then I applied the pseudo code into theano, and modified some detailed places to make it can work. The most confused problem is that global variables in def, however Fred helped solve it finally. For test file of this part, because we will print the minimum peak at profile_memory, so it can use the same one test file with phrase 1.</p>

<p>This PR is nearly finished, there are some details need to check out and modify it to make this method work better.</p>

<h4 id="future-plan">Future Plan</h4>

<p>For next step, I would do “Add a compile argument that use the function above to order the function for such lower memory usage.” I think this wouldn’t be hard.</p>

<p>After this, I would have two exams at July 1st, 2nd, I may restart my GSoC work from July 3rd.</p>

<p>From that time I would start do the step of “Reduce the number of allocation/reuse allocation of ndarray”. It also includes 2 phrases:</p>

<ol>
  <li>
    <p>Keep the current order of execution that lower the memory usage. Then modify the storage_map to have multiple node share the same output storage space. Start with only 0d ndarray. That way, we are sure it have the same size.</p>
  </li>
  <li>
    <p>Extend it to nd array by checking node that have the same shape with the information that we have in the shape feature that keep track of shape information in the graph.</p>
  </li>
</ol>

<p>I would first read some documents about this aspect, read related part of code, come up with some ideas, then have a dicussion with my mentors about the my ideas and the solution..</p>

<h4 id="other-aspects">Other Aspects</h4>

<p>Fred is really a nice mentor, he is very patient, and willing to help me. I just leant a lot from him, if I can meet him, I would like to give him a big hug to appreciate him :), also thanks for James and Arnaund for answering my questions immediately with great help. I think I had made up my mind to continue contributing to Theano after GSoC.</p>

<p>I am so lucky to be chosen by the GSoC ten years Reunion, but whether I can go depends on if I can earn my flight tickets before its opening.</p>

<p>It’s really nice to join the Chinese GSoC group, meet some fantastic guys, and we will host an online sharing in recent days, the topic is introducing our GSoC projects.</p>


            <div class="spacing"></div>
            <!-- <h6>SHARE:</h6>
            <p class="share">
                <a href="#"><i class="fa fa-twitter"></i></a>
                <a href="#"><i class="fa fa-facebook"></i></a>
                <a href="#"><i class="fa fa-tumblr"></i></a>
                <a href="#"><i class="fa fa-google-plus"></i></a>
            </p> -->
        </div><!--/col-lg-8 -->

        <div class="col-lg-4">
   <!--  <h4>Search</h4>
    <div class="hline"></div>
        <p>
            <br/>
            <input type="text" class="form-control" placeholder="Search something">
        </p>
    <div class="spacing"></div> -->
    <h4>Subscribe</h4>
    <div class="hline"></div>
        <p>
            <p class="rss-subscribe">Subscribe to this blog <a href="/feed.xml">via RSS</a>.</p>
        </p>
    <div class="spacing"></div>
    <h4>Categories</h4>
    <div class="hline"></div>
    
        <p>
            <a href="/category/#life"><i class="fa fa-angle-right"></i> Life</a>
            <span class="badge badge-theme pull-right">56</span>
        </p>
    
        <p>
            <a href="/category/#having fun"><i class="fa fa-angle-right"></i> Having fun</a>
            <span class="badge badge-theme pull-right">6</span>
        </p>
    
        <p>
            <a href="/category/#python"><i class="fa fa-angle-right"></i> Python</a>
            <span class="badge badge-theme pull-right">9</span>
        </p>
    
        <p>
            <a href="/category/#hacker"><i class="fa fa-angle-right"></i> Hacker</a>
            <span class="badge badge-theme pull-right">2</span>
        </p>
    
        <p>
            <a href="/category/#dev"><i class="fa fa-angle-right"></i> Dev</a>
            <span class="badge badge-theme pull-right">11</span>
        </p>
    
        <p>
            <a href="/category/#scrapy"><i class="fa fa-angle-right"></i> Scrapy</a>
            <span class="badge badge-theme pull-right">3</span>
        </p>
    
        <p>
            <a href="/category/#theano"><i class="fa fa-angle-right"></i> Theano</a>
            <span class="badge badge-theme pull-right">14</span>
        </p>
    
        <p>
            <a href="/category/#machine learning"><i class="fa fa-angle-right"></i> Machine learning</a>
            <span class="badge badge-theme pull-right">5</span>
        </p>
    
        <p>
            <a href="/category/#explorer"><i class="fa fa-angle-right"></i> Explorer</a>
            <span class="badge badge-theme pull-right">3</span>
        </p>
    

    <div class="spacing"></div>

    <h4>Recent Posts</h4>
    <div class="hline"></div>
        <ul class="popular-posts">
             
                <li>
                    <!-- <a href="/blog/life/dev/bookmarks-migration-plan"><img src="/assets/img/blog/thumbs/" alt="Popular Post"></a> -->
                    <p><a href="/blog/life/dev/bookmarks-migration-plan">Bookmarks Migration Plan</a></p>
                <em>Posted on 03 Apr 2015</em>
            </li>
             
                <li>
                    <!-- <a href="/blog/life/living-in-japan"><img src="/assets/img/blog/thumbs/" alt="Popular Post"></a> -->
                    <p><a href="/blog/life/living-in-japan">Living in Japan</a></p>
                <em>Posted on 16 Mar 2015</em>
            </li>
             
                <li>
                    <!-- <a href="/blog/life/chinese-new-year"><img src="/assets/img/blog/thumbs/" alt="Popular Post"></a> -->
                    <p><a href="/blog/life/chinese-new-year">Chinese New Year</a></p>
                <em>Posted on 21 Feb 2015</em>
            </li>
             
                <li>
                    <!-- <a href="/blog/explorer/thai-trip"><img src="/assets/img/blog/thumbs/" alt="Popular Post"></a> -->
                    <p><a href="/blog/explorer/thai-trip">Thai Trip</a></p>
                <em>Posted on 05 Feb 2015</em>
            </li>
             
        </ul>

    <div class="spacing"></div>

    <!-- <h4>Popular Tags</h4>
    <div class="hline"></div>
    <p>
    
            <a class="btn btn-theme" href="/category/#life" role="button">Life (56)</a>	         
        
            <a class="btn btn-theme" href="/category/#having fun" role="button">Having fun (6)</a>	         
        
            <a class="btn btn-theme" href="/category/#python" role="button">Python (9)</a>	         
        
            <a class="btn btn-theme" href="/category/#hacker" role="button">Hacker (2)</a>	         
        
            <a class="btn btn-theme" href="/category/#dev" role="button">Dev (11)</a>	         
        
            <a class="btn btn-theme" href="/category/#scrapy" role="button">Scrapy (3)</a>	         
        
            <a class="btn btn-theme" href="/category/#theano" role="button">Theano (14)</a>	         
        
            <a class="btn btn-theme" href="/category/#machine learning" role="button">Machine learning (5)</a>	         
        
            <a class="btn btn-theme" href="/category/#explorer" role="button">Explorer (3)</a>	         
        
    </p> -->
</div>

    </div><!--/row -->
</div><!--/container -->


        <div id="footerwrap">
    <div class="container">
        <div class="row">
            <div class="col-lg-4">
                <h4>About</h4>
                <div class="hline-w"></div>
                <p>Exploring the world :)</p>
            </div>
            <div class="col-lg-4">
                <h4>Social Links</h4>
                <div class="hline-w"></div>
                <p>
                    
                        <a href="https://www.facebook.com/roy.xue29" class="btn-social btn-outline"><i class="fa fa-facebook"></i></a>
                    
                        <a href="https://twitter.com/xljroy" class="btn-social btn-outline"><i class="fa fa-twitter"></i></a>
                    
                        <a href="http://instagram.com/xljroy" class="btn-social btn-outline"><i class="fa fa-instagram"></i></a>
                    
                        <a href="https://plus.google.com/+RoyXue" class="btn-social btn-outline"><i class="fa fa-google-plus"></i></a>
                    
                        <a href="https://cn.linkedin.com/in/royxue" class="btn-social btn-outline"><i class="fa fa-linkedin"></i></a>
                    
                        <a href="https://github.com/royxue" class="btn-social btn-outline"><i class="fa fa-github"></i></a>
                    
                        <a href="https://500px.com/xljroy" class="btn-social btn-outline"><i class="fa fa-picture-o"></i></a>
                    
                </p>
            </div>
            <div class="col-lg-4">
                <h4>Contacts</h4>
                <div class="hline-w"></div>
                <p>
                    
                        Email=> xljroy#gmail.com <br>
                    
                        Wechat=> xljroy <br>
                    
                        Line=> royxue29 <br>
                    
                </p>
            </div>
        </div><! --/row -->
    </div><! --/container -->
</div><! --/footerwrap -->

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="/assets/js/bootstrap.min.js"></script>
<script src="/assets/js/retina-1.1.0.js"></script>
<script src="/assets/js/jquery.hoverdir.js"></script>
<script src="/assets/js/jquery.hoverex.min.js"></script>
<script src="/assets/js/jquery.prettyPhoto.js"></script>
<script src="/assets/js/jquery.isotope.min.js"></script>
<script src="/assets/js/custom.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58877422-1', 'auto');
  ga('send', 'pageview');

</script>

<script>
// Portfolio
(function($) {
	"use strict";
	var $container = $('.portfolio'),
		$items = $container.find('.portfolio-item'),
		portfolioLayout = 'fitRows';
		
		if( $container.hasClass('portfolio-centered') ) {
			portfolioLayout = 'masonry';
		}
				
		$container.isotope({
			filter: '*',
			animationEngine: 'best-available',
			layoutMode: portfolioLayout,
			animationOptions: {
			duration: 750,
			easing: 'linear',
			queue: false
		},
		masonry: {
		}
		}, refreshWaypoints());
		
		function refreshWaypoints() {
			setTimeout(function() {
			}, 1000);   
		}
				
		$('nav.portfolio-filter ul a').on('click', function() {
				var selector = $(this).attr('data-filter');
				$container.isotope({ filter: selector }, refreshWaypoints());
				$('nav.portfolio-filter ul a').removeClass('active');
				$(this).addClass('active');
				return false;
		});
		
		function getColumnNumber() { 
			var winWidth = $(window).width(), 
			columnNumber = 1;
		
			if (winWidth > 1200) {
				columnNumber = 5;
			} else if (winWidth > 950) {
				columnNumber = 4;
			} else if (winWidth > 600) {
				columnNumber = 3;
			} else if (winWidth > 400) {
				columnNumber = 2;
			} else if (winWidth > 250) {
				columnNumber = 1;
			}
				return columnNumber;
			}       
			
			function setColumns() {
				var winWidth = $(window).width(), 
				columnNumber = getColumnNumber(), 
				itemWidth = Math.floor(winWidth / columnNumber);
				
				$container.find('.portfolio-item').each(function() { 
					$(this).css( { 
					width : itemWidth + 'px' 
				});
			});
		}
		
		function setPortfolio() { 
			setColumns();
			$container.isotope('reLayout');
		}
			
		$container.imagesLoaded(function () { 
			setPortfolio();
		});
		
		$(window).on('resize', function () { 
		setPortfolio();          
	});
})(jQuery);
</script>
    </body>
</html>